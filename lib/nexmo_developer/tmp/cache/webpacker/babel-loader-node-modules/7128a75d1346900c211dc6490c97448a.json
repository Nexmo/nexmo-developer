{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport UserPreference from './user_preference';\n\nvar VoltaTabbedExamples =\n/*#__PURE__*/\nfunction () {\n  function VoltaTabbedExamples() {\n    _classCallCheck(this, VoltaTabbedExamples);\n\n    this.userPreference = new UserPreference(true);\n\n    if ($('.Vlt-tabs').length) {\n      this.context = $('.Vlt-tabs');\n      this.restoreTabs = this.restoreTabs.bind(this);\n      this.setupEvents = this.setupEvents.bind(this);\n      this.onTabClick = this.onTabClick.bind(this);\n      this.onPopState = this.onPopState.bind(this);\n      this.persistLanguage = this.persistLanguage.bind(this);\n      this.restoreTabs();\n      this.setupEvents();\n    }\n  }\n\n  _createClass(VoltaTabbedExamples, [{\n    key: \"shouldRestoreTabs\",\n    value: function shouldRestoreTabs() {\n      return !this.context.find('.Vlt-tabs__header--bordered').data('has-initial-tab');\n    }\n  }, {\n    key: \"languages\",\n    value: function languages() {\n      var obj = {};\n      $(this.context).find(\"[data-language]\").each(function (index, el) {\n        $(el).data('language').split(',').forEach(function (language) {\n          obj[language] = {\n            platform: $(el).data('platform') || false\n          };\n        });\n      });\n      return obj;\n    }\n  }, {\n    key: \"restoreTabs\",\n    value: function restoreTabs() {\n      if (this.shouldRestoreTabs()) {\n        var languages = this.languages();\n        var language = this.userPreference.topMatch(Object.keys(languages));\n\n        if (language) {\n          if (languages[language]['platform']) {\n            this.setPlatform(languages[language]['platform'], this.context);\n          } else {\n            this.setLanguage(language);\n          }\n        }\n      } else {\n        var selectedLanguage = this.context.find('li.Vlt-tabs__link_active').data('language');\n        this.setLanguage(selectedLanguage);\n      }\n    }\n  }, {\n    key: \"setupEvents\",\n    value: function setupEvents() {\n      $('.Vlt-tabs__link').click(this.onTabClick);\n      $(window).on('popstate', this.onPopState);\n    }\n  }, {\n    key: \"onPopState\",\n    value: function onPopState(event) {\n      if (window.history.state && window.history.state.language) {\n        this.setLanguage(window.history.state.language);\n      }\n    }\n  }, {\n    key: \"onTabClick\",\n    value: function onTabClick(event) {\n      // Prevent nested tabs from changing the url\n      if ($(event.target).parents('.Vlt-tabs').length > 1) {\n        return;\n      }\n\n      var language = $(event.currentTarget).data('language');\n      var languageType = $(event.currentTarget).data('language-type');\n      var linkable = $(event.currentTarget).data('language-linkable');\n\n      if (language) {\n        if (linkable) {\n          document.dispatchEvent(new CustomEvent('codeLanguageChange', {\n            \"detail\": {\n              \"language\": language\n            }\n          }));\n\n          if ($(\".skip-pushstate\").length == 0) {\n            var rootPath = $('body').data('push-state-root');\n            window.history.pushState({\n              language: language\n            }, 'language', \"\".concat(rootPath, \"/\").concat(language));\n          }\n        }\n\n        this.persistLanguage(language, languageType, linkable);\n      }\n    }\n  }, {\n    key: \"persistLanguage\",\n    value: function persistLanguage(language, languageType) {\n      if (language) {\n        this.userPreference.promote(languageType, language);\n      }\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(language) {\n      setTimeout(function () {\n        $(\"[data-language='\".concat(language, \"']\")).click(); // Remove skip pushstate after the first load. This is a bit of a hack, but it works to stop breaking\n        // the back button\n\n        $(\".skip-pushstate\").removeClass('skip-pushstate');\n      }, 0);\n    }\n  }, {\n    key: \"setPlatform\",\n    value: function setPlatform(platform) {\n      setTimeout(function () {\n        $(\"[data-platform='\".concat(platform, \"']\")).click();\n      }, 0);\n    }\n  }]);\n\n  return VoltaTabbedExamples;\n}();\n\nexport { VoltaTabbedExamples as default };","map":{"version":3,"sources":["/Users/bgreenberg2/Documents/dev/nexmo-developer/lib/nexmo_developer/app/javascript/volta_tabbed_examples/index.js"],"names":["UserPreference","VoltaTabbedExamples","userPreference","$","length","context","restoreTabs","bind","setupEvents","onTabClick","onPopState","persistLanguage","find","data","obj","each","index","el","split","forEach","language","platform","shouldRestoreTabs","languages","topMatch","Object","keys","setPlatform","setLanguage","selectedLanguage","click","window","on","event","history","state","target","parents","currentTarget","languageType","linkable","document","dispatchEvent","CustomEvent","rootPath","pushState","promote","setTimeout","removeClass"],"mappings":"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","sourcesContent":["import UserPreference from './user_preference'\n\nexport default class VoltaTabbedExamples {\n  constructor() {\n    this.userPreference = new UserPreference(true);\n\n    if ($('.Vlt-tabs').length) {\n      this.context = $('.Vlt-tabs');\n      this.restoreTabs = this.restoreTabs.bind(this)\n      this.setupEvents = this.setupEvents.bind(this)\n      this.onTabClick = this.onTabClick.bind(this)\n      this.onPopState = this.onPopState.bind(this)\n      this.persistLanguage = this.persistLanguage.bind(this)\n      this.restoreTabs()\n      this.setupEvents()\n    }\n  }\n\n  shouldRestoreTabs() {\n    return !this.context.find('.Vlt-tabs__header--bordered').data('has-initial-tab');\n  }\n\n  languages() {\n    let obj = {}\n\n    $(this.context).find(`[data-language]`).each(function(index, el) {\n      $(el).data('language').split(',').forEach(function(language) {\n        obj[language] = {\n          platform: $(el).data('platform') || false\n        }\n      })\n    })\n\n    return obj\n  }\n\n  restoreTabs() {\n    if (this.shouldRestoreTabs()) {\n      let languages = this.languages()\n      const language = this.userPreference.topMatch(Object.keys(languages))\n\n      if (language) {\n        if (languages[language]['platform']) {\n          this.setPlatform(languages[language]['platform'], this.context)\n        } else {\n          this.setLanguage(language);\n        }\n      }\n    } else {\n      const selectedLanguage = this.context.find('li.Vlt-tabs__link_active').data('language');\n      this.setLanguage(selectedLanguage);\n    }\n  }\n\n  setupEvents() {\n    $('.Vlt-tabs__link').click(this.onTabClick)\n    $(window).on('popstate', this.onPopState)\n  }\n\n  onPopState(event) {\n    if (window.history.state && window.history.state.language) {\n      this.setLanguage(window.history.state.language)\n    }\n  }\n\n  onTabClick(event) {\n    // Prevent nested tabs from changing the url\n    if ($(event.target).parents('.Vlt-tabs').length > 1) { return; }\n\n    const language = $(event.currentTarget).data('language')\n    const languageType = $(event.currentTarget).data('language-type')\n    const linkable = $(event.currentTarget).data('language-linkable')\n\n    if (language) {\n      if (linkable) {\n        document.dispatchEvent(new CustomEvent('codeLanguageChange', { \"detail\": { \"language\": language } }));\n        if ($(\".skip-pushstate\").length == 0) {\n            const rootPath = $('body').data('push-state-root')\n            window.history.pushState({language}, 'language', `${rootPath}/${language}`)\n        }\n      }\n\n      this.persistLanguage(language, languageType, linkable)\n    }\n  }\n\n  persistLanguage(language, languageType) {\n    if (language) {\n      this.userPreference.promote(languageType, language)\n    }\n  }\n\n  setLanguage(language) {\n      setTimeout(() => {\n        $(`[data-language='${language}']`).click();\n\n        // Remove skip pushstate after the first load. This is a bit of a hack, but it works to stop breaking\n        // the back button\n        $(\".skip-pushstate\").removeClass('skip-pushstate');\n      }, 0);\n  }\n\n  setPlatform(platform) {\n      setTimeout(() => { $(`[data-platform='${platform}']`).click(); }, 0);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}