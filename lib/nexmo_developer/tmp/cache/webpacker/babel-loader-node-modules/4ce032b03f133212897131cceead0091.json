{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Careers =\n/*#__PURE__*/\nfunction () {\n  function Careers() {\n    _classCallCheck(this, Careers);\n\n    this.departments = [];\n    this.locations = [];\n    this.setupListeners();\n  }\n\n  _createClass(Careers, [{\n    key: \"showCareer\",\n    value: function showCareer(career) {\n      var department = career.getElementsByClassName('department')[0].dataset.department;\n      var location = career.getElementsByClassName('location')[0].dataset.location;\n      return (this.departments.includes(department) || this.departments.length === 0) && (this.locations.some(function (l) {\n        return location.includes(l) || l.includes(location);\n      }) || this.locations.length === 0);\n    }\n  }, {\n    key: \"toggleCareers\",\n    value: function toggleCareers() {\n      Array.from(document.getElementsByClassName('Nxd-career')).forEach(function (career) {\n        career.classList.toggle('hide', !this.showCareer(career));\n      }, this);\n      document.getElementById('no-results').classList.toggle('hide', document.querySelectorAll('.Nxd-career:not(.hide)').length !== 0);\n      document.querySelectorAll('.Nxd-career:not(.hide)').forEach(function (career, index) {\n        career.classList.toggle('striped', index % 2 == 0);\n      });\n    }\n  }, {\n    key: \"updateURL\",\n    value: function updateURL() {\n      var currentUrl = new URL(window.location.href);\n      var query = {};\n\n      if (this.departments.length > 0) {\n        Object.assign(query, {\n          departments: this.departments\n        });\n      }\n\n      if (this.locations.length > 0) {\n        Object.assign(query, {\n          locations: this.locations.map(function (l) {\n            return l.split(',')[0];\n          })\n        });\n      }\n\n      var params = new URLSearchParams(query);\n      currentUrl.search = params;\n      window.history.pushState({}, 'Careers', currentUrl);\n    }\n  }, {\n    key: \"dropdownValue\",\n    value: function dropdownValue(length, item) {\n      var value;\n\n      switch (length) {\n        case 0:\n          value = \"\".concat(item, \"s\");\n          break;\n\n        case 1:\n          value = \"1 \".concat(item, \" selected\");\n          break;\n\n        default:\n          value = \"\".concat(length, \" \").concat(item, \"s selected\");\n      }\n\n      return value;\n    }\n  }, {\n    key: \"updateDepartmentsDropdown\",\n    value: function updateDepartmentsDropdown() {\n      var value = this.dropdownValue(this.departments.length, 'Department');\n      document.querySelector('#department-filter button').innerText = value;\n    }\n  }, {\n    key: \"updateLocationsDropdown\",\n    value: function updateLocationsDropdown() {\n      var value = this.dropdownValue(this.locations.length, 'Location');\n      document.querySelector('#location-filter button').innerText = value;\n    }\n  }, {\n    key: \"departmentChangeHandler\",\n    value: function departmentChangeHandler(event) {\n      if (event.target.checked) {\n        this.departments.push(event.target.value);\n      } else {\n        this.departments.splice(this.departments.indexOf(event.target.value), 1);\n      }\n\n      this.updateURL();\n      this.updateDepartmentsDropdown();\n      this.toggleCareers();\n    }\n  }, {\n    key: \"locationChangeHandler\",\n    value: function locationChangeHandler(event) {\n      if (event.target.checked) {\n        this.locations.push(event.target.value);\n      } else {\n        this.locations.splice(this.locations.indexOf(event.target.value), 1);\n      }\n\n      this.updateURL();\n      this.updateLocationsDropdown();\n      this.toggleCareers();\n    }\n  }, {\n    key: \"setFiltersFromURL\",\n    value: function setFiltersFromURL() {\n      var params = new URLSearchParams(window.location.search);\n      this.departments = [];\n      this.locations = [];\n      params.get('departments') && params.get('departments').split(',').forEach(function (department) {\n        this.departments.push(department);\n        document.getElementById(department).checked = true;\n      }, this);\n      params.get('locations') && params.get('locations').split(',').forEach(function (location) {\n        var checkbox = document.querySelector(\"[id^='\".concat(location, \"']\"));\n\n        if (checkbox) {\n          this.locations.push(location);\n          checkbox.checked = true;\n        }\n      }, this);\n      this.updateDepartmentsDropdown();\n      this.updateLocationsDropdown();\n      this.toggleCareers();\n    }\n  }, {\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      var self = this;\n      window.addEventListener('load', function () {\n        if (!document.getElementById('careers')) {\n          return;\n        }\n\n        self.toggleCareers();\n        document.getElementById('department-filter').addEventListener('change', self.departmentChangeHandler.bind(self));\n        document.getElementById('location-filter').addEventListener('change', self.locationChangeHandler.bind(self));\n        self.setFiltersFromURL();\n      });\n      window.addEventListener('popstate', function (event) {\n        if (!document.getElementById('careers')) {\n          return;\n        }\n\n        self.setFiltersFromURL();\n      });\n    }\n  }]);\n\n  return Careers;\n}();\n\nexport { Careers as default };","map":{"version":3,"sources":["/Users/bgreenberg2/Documents/dev/nexmo-developer/lib/nexmo_developer/app/javascript/careers/index.js"],"names":["Careers","departments","locations","setupListeners","career","department","getElementsByClassName","dataset","location","includes","length","some","l","Array","from","document","forEach","classList","toggle","showCareer","getElementById","querySelectorAll","index","currentUrl","URL","window","href","query","Object","assign","map","split","params","URLSearchParams","search","history","pushState","item","value","dropdownValue","querySelector","innerText","event","target","checked","push","splice","indexOf","updateURL","updateDepartmentsDropdown","toggleCareers","updateLocationsDropdown","get","checkbox","self","addEventListener","departmentChangeHandler","bind","locationChangeHandler","setFiltersFromURL"],"mappings":"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","sourcesContent":["export default class Careers {\n\n  constructor() {\n    this.departments = [];\n    this.locations = [];\n    this.setupListeners();\n  }\n\n  showCareer(career) {\n    const department = career.getElementsByClassName('department')[0].dataset.department;\n    const location = career.getElementsByClassName('location')[0].dataset.location;\n\n    return (this.departments.includes(department) || this.departments.length === 0)\n      && (this.locations.some(l => location.includes(l) || l.includes(location)) || this.locations.length === 0);\n  }\n\n  toggleCareers() {\n    Array.from(document.getElementsByClassName('Nxd-career')).forEach(function(career) {\n      career.classList.toggle('hide', !this.showCareer(career));\n    }, this);\n\n    document.getElementById('no-results').classList.toggle(\n      'hide',\n      document.querySelectorAll('.Nxd-career:not(.hide)').length !== 0\n    );\n\n    document.querySelectorAll('.Nxd-career:not(.hide)').forEach(function(career, index) {\n      career.classList.toggle('striped', index % 2 == 0);\n    });\n  }\n\n  updateURL() {\n    let currentUrl = new URL(window.location.href);\n    let query = {};\n    if (this.departments.length > 0) {\n      Object.assign(query, { departments: this.departments });\n    }\n    if (this.locations.length > 0) {\n      Object.assign(query, { locations: this.locations.map((l) => l.split(',')[0]) });\n    }\n\n    let params = new URLSearchParams(query);\n\n    currentUrl.search = params\n    window.history.pushState({}, 'Careers', currentUrl);\n  }\n\n  dropdownValue(length, item) {\n    let value;\n    switch(length) {\n      case 0:\n        value = `${item}s`;\n        break;\n      case 1:\n        value = `1 ${item} selected`;\n        break;\n      default:\n        value = `${length} ${item}s selected`;\n    }\n    return value;\n  }\n\n  updateDepartmentsDropdown() {\n    let value = this.dropdownValue(this.departments.length, 'Department');\n    document.querySelector('#department-filter button').innerText = value;\n  }\n\n  updateLocationsDropdown() {\n    let value = this.dropdownValue(this.locations.length, 'Location');\n    document.querySelector('#location-filter button').innerText = value;\n  }\n\n  departmentChangeHandler(event) {\n    if (event.target.checked) {\n      this.departments.push(event.target.value);\n    } else {\n      this.departments.splice(this.departments.indexOf(event.target.value), 1);\n    }\n    this.updateURL();\n    this.updateDepartmentsDropdown();\n    this.toggleCareers();\n  }\n\n  locationChangeHandler(event) {\n    if (event.target.checked) {\n      this.locations.push(event.target.value);\n    } else {\n      this.locations.splice(this.locations.indexOf(event.target.value), 1);\n    }\n    this.updateURL();\n    this.updateLocationsDropdown();\n    this.toggleCareers();\n  }\n\n  setFiltersFromURL() {\n    let params = new URLSearchParams(window.location.search);\n    this.departments = [];\n    this.locations = [];\n\n    params.get('departments') && params.get('departments').split(',').forEach(function(department) {\n      this.departments.push(department);\n      document.getElementById(department).checked = true;\n    }, this);\n\n    params.get('locations') && params.get('locations').split(',').forEach(function(location) {\n      let checkbox = document.querySelector(`[id^='${location}']`);\n      if (checkbox) {\n        this.locations.push(location);\n        checkbox.checked = true;\n      }\n    }, this);\n\n    this.updateDepartmentsDropdown();\n    this.updateLocationsDropdown();\n    this.toggleCareers();\n  }\n\n  setupListeners() {\n    const self = this;\n    window.addEventListener('load', function() {\n      if (!document.getElementById('careers')) { return; }\n\n      self.toggleCareers();\n      document.getElementById('department-filter').addEventListener('change', self.departmentChangeHandler.bind(self));\n      document.getElementById('location-filter').addEventListener('change', self.locationChangeHandler.bind(self));\n      self.setFiltersFromURL();\n    });\n\n    window.addEventListener('popstate', function(event) {\n      if (!document.getElementById('careers')) { return; }\n      self.setFiltersFromURL();\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}